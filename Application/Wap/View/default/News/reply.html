
<extend name="Base/common" />

<block name="body">
    <div class="cont">
        <div class="xq_title">
            <h1>{$info.title}</h1>
            <p>时间：{$info.create_time|date='Y-m-d',###}</p>
        </div>
        <div class="xq_wz">
            {$info.content}
        </div>
    </div>
</block>

<block name="script">
    <script>
        $(document).ready(function(){
            $('.xq_wz img').each(function(){
                var url = $(this).attr('src');
                var obj = $(this);
                getImageWidth(url,function(w,h){
                    if (parseInt(w) > 100) {
                        obj.attr('width', '100%').attr('height', 'auto');
                    }
                });
            })
        });

        function getImageWidth(url,callback){
            var img = new Image();
            img.src = url;

            // 如果图片被缓存，则直接返回缓存数据
            if(img.complete){
                callback(img.width, img.height);
            }

            // 完全加载完毕的事件
            img.onload = function(){
                callback(img.width, img.height);
            }
        }
    </script>
</block>